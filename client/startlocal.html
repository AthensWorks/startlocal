<head>
  <title>startlocal</title>
</head>

<body>

Sort by: {{> most_recent}} | {{> most_upvotes}} | {{> categories}}
{{> page }}
</body>


<!--
<template name="post">
  <div id="{{_id}}" class="post">
     <a href="{{url}}" target="_new">{{name}}</a>
     {{> upvote_button}}
     <div class="description">
       {{description}} - {{category}} (Votes: {{upvotedBy.length}}, Flagged {{flaggedBy.length}})
     </div>
     {{> flag_button}}
     <div class="updated_at">
       Last updated at {{updatedAt}}
     </div>
  </div>
</template>
 -->

<template name="page">
	{{#if showCreateDialog}}
		{{> createDialog}}
	{{/if}}

	<div class="login">
		{{loginButtons align="right"}}
	</div>

	<div id="header">
		<h1>StartLocal</h1>
	</div>

	<div id="outer">
		{{> postlist}}
	</div>

	{{> addButton }}
</template>

<template name="postlist">
	<div class="postlist">
		{{#each posts}}
			{{> post}}
		{{else}}
			No posts yet.
		{{/each}}
	</div>
</template>

<template name="post">
	<div class="post {{selected}}">
		<div class="upvotearea">
			<div class="upvotecount">{{upvotedBy.length}}</div>
			{{> upvote_button}}
		</div>
		<div class="flagarea">
			{{> flag_button}}
		</div>
		<div>
			<div class="name"><a href="{{url}}" target="_new">{{name}}</a></div>
			<div class="description">{{description}}</div>
			<div class="updated_at">Updated: {{updatedAt}}</div>
		</div>
	</div>
</template>

<template name="createDialog">
	<div class="mask"> </div>
	<div class="modal">
		<div class="modal-header">
			<button type="button" class="close cancel">&times;</button>
			<h3>Add Resource</h3>
		</div>

		<div class="modal-body">
			{{#if error}}
				<div class="alert alert-error">{{error}}</div>
			{{/if}}

			<label>Name</label>
			<input type="text" class="name span5">

				<label>Description</label>
				<textarea class="description span5" maxlength="140"></textarea>

				<label>Link</label>
				<input type="text" class="url span5">

<!--
				<label>Category</label>
				<select>
					{{#each category}}
						<option value="{{name}}">{{name}}</option>
					{{/each}}
				 </select>
 -->
		<div class="modal-footer">
			<a href="#" class="btn cancel">Cancel</a>
			<a href="#" class="btn btn-primary save">Add Resource</a>
		</div>
	</div>
</template>

<template name="addButton">
	<div>
	<input type="button" value="New Thing!"
		class="btn btn-small add">
	</div>
</template>

<template name="upvote_button">
  <div>
    <a href="#" class="upvote" data-id="{{_id}}">upvote</a>
  </div>
</template>

<template name="flag_button">
  <div>
    <a href="#" class="flag" data-id="{{_id}}">flag</a>
  </div>
</template>

<template name="most_recent">
  <a href="#" class="sort">Most Recent</a>
</template>

<template name="most_upvotes">
  <a href="#" class="sort">Most Upvotes</a>
</template>

<template name="categories">
  <a href="#" class="sort">Categories</a>
</template>